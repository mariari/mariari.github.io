<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mahjong Shanten Calculations</title>

    <!-- browser setup -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">

    <!-- page meta information -->
    <meta name="description" content="Mahjong Shanten Calculations">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="gtoolkit book">
    <meta property="og:title" content="Mahjong Shanten Calculations">
    <meta property="og:url" content="https://book.gtoolkit.com/mahjong-shanten-calculations-9997z4yze8dhfwt3bokgfyx8y.html">
    <meta property="og:description" content="Mahjong Shanten Calculations">

    <!-- CSS styles -->
    <link rel="stylesheet" href="assets/vendor/awesomefonts/css/all.css">
    <link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/v2/src/css/lepiter-common.css">
    <link rel="stylesheet" href="assets/v2/src/css/lepiter-snippets.css">
    <link rel="stylesheet" href="assets/v2/src/css/vs.css">
</head>
<body>

    <div class="content">
        <div class="row le-row">

            <!-- side menu with header -->

            <div class="col-lg-3 le-nav-column">
                <div class="side-menu sticky-top navbar-expand-lg le-nav-scrollable le-nav-container">
                    <header class="navbar navbar-light bg-white sticky-top px-3 le-nav-footer">
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#le-nav-collapsable" arial-controls="le-nav-collapsable" arial-expanded="false" arial-label="Toggle navigation">
                            <i class="fas fa-bars">
                            </i>
                        </button>
                        <p class="le-logo">
                            <a class="le-logo-link" href="https://gtoolkit.com" alt="Glamorous Toolkit"><span class="le-logo-g">glamorous</span><span class="le-logo-t">toolkit</span></a> <span class="le-logo-version">v1.0.904</span>
                        </p>
                    </header>

                    <nav id="le-nav-collapsable" class="navbar-collapse collapse le-nav-root">

                        <!-- navigation start -->

                        <ul class="nav flex-column le-nav le-nav-level-0">  <li class="nav-item  le-nav-item le-nav-level-1">    <a class="nav-link le-nav-link le-nav-level-1" href="table-of-contents-2qzwdq1sjk7rkkm19wn9xo3xm.html">Table of Contents    </a>  </li>  <li class="nav-item  le-nav-item le-nav-level-1">    <a class="nav-link le-nav-link le-nav-level-1" href="git-exploration-3a776zg73cujtc6djgdy6wpzp.html">Git Exploration    </a>    <ul class="nav flex-column le-nav le-nav-level-1">      <li class="nav-item  le-nav-item le-nav-level-2">        <a class="nav-link le-nav-link le-nav-level-2" href="git-release-checker--with-github-data-b4sxiotscigazcy64q2ezvcwt.html">Git Release Checker: With Github Data        </a>      </li>    </ul>  </li>  <li class="nav-item  le-nav-item le-nav-level-1">    <a class="nav-link le-nav-link le-nav-level-1" href="mahjong-ajc74mr0i1pgt8td5660dkhg5.html">Mahjong    </a>    <ul class="nav flex-column le-nav le-nav-level-1">      <li class="nav-item  le-nav-item le-nav-level-2">        <a class="nav-link le-nav-link le-nav-level-2" href="mahjong-tactics-1l41j2ln59fumi6gfkewcjimu.html">Mahjong Tactics        </a>      </li>      <li class="nav-item  le-nav-item le-nav-level-2">        <a class="nav-link le-nav-link le-nav-level-2" href="mahjong-algorithms-and-exploration-3ifqqrjnuly2xjmfreghzqayr.html">Mahjong Algorithms and Exploration        </a>        <ul class="nav flex-column le-nav le-nav-level-2">          <li class="nav-item  le-nav-item le-nav-level-3">            <a class="nav-link le-nav-link le-nav-level-3" href="mahjong-hand-acceptance-92qynfei1oie76eyij1ngzavh.html">Mahjong Hand Acceptance            </a>          </li>          <li class="nav-item  active le-nav-item le-nav-level-3">            <a class="nav-link le-nav-link le-nav-level-3 active" href="mahjong-shanten-calculations-9997z4yze8dhfwt3bokgfyx8y.html">Mahjong Shanten Calculations            </a>          </li>        </ul>      </li>    </ul>  </li>  <li class="nav-item  le-nav-item le-nav-level-1">    <a class="nav-link le-nav-link le-nav-level-1" href="glossary-of-terms-a5d5onslmzrgaika37ydfp1w0.html">Glossary of Terms    </a>    <ul class="nav flex-column le-nav le-nav-level-1">      <li class="nav-item  le-nav-item le-nav-level-2">        <a class="nav-link le-nav-link le-nav-level-2" href="shanten-a5d5onsg5911189zz8w7n5k2b.html">Shanten        </a>      </li>      <li class="nav-item  le-nav-item le-nav-level-2">        <a class="nav-link le-nav-link le-nav-level-2" href="tenpai-4ihldzd680p6mvkkjxg7xqy4m.html">Tenpai        </a>      </li>    </ul>  </li></ul>

                        <!-- navigation end -->
                    </nav>
                </div>
            </div>

            <!-- main content -->

            <div class="col-lg-9 le-main-col">
                <div class="container min-height py-5 le-main-container">
                    <main>
                        <h1 class="le-main-title">Mahjong Shanten Calculations</h1>

                        <!-- page content start -->

                        <div class="snippet textual-snippet text-snippet nesting-level-1 paragraphWidth">  <h3> Explaining the problem  </h3></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>In <a href="mahjong-hand-acceptance-92qynfei1oie76eyij1ngzavh.html">Mahjong Hand Acceptance</a> we saw a derivation of a general acceptance algorithm.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>This is very nice for seeing what tiles could potentially help in forming groups. However what this lacked was showing: "given a hand, what tiles progress the hand towards completion".  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>This concept is typically known as <a href="shanten-a5d5onsg5911189zz8w7n5k2b.html">Shanten</a>.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>If we had some way to calculate <code>shanten</code> then we could have a more strict version of <code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">MJHand>>#accepts</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><pre><code class="">accepts	^ self chunkedGroupBackTrackerwith: #accepts</code></pre>    </span> that only considers tiles that lower the Shanten value.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>Let us Investigate this issue in full.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-1 paragraphWidth">  <h3> Analyzing the problem  </h3></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>A winning hand typically consists of 1 pair and 4 groupings (5 groupings in Taiwanese Mahjong).  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>The pair consists of 2 tiles, and each grouping consists either of 3 or 4 tiles. However, when groupings of 4 occurs, then a tile is drawn and added to the hand to equalize the number of tiles.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>The <a href="https://pathofhouhou.blogspot.com/">Hopless Girl on the Path of Houhou</a> blog  has a <a href="https://pathofhouhou.blogspot.com/2019/05/calculating-shanten-and-ukeire.html">good article</a> that gives a algorithm. Namely:  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>1. Count 1 if there is a pair in the hand  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>2. Count 2 for each completed set  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>3. Count 1 for each partial set, up to 4 with <code>2.</code>  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>4. Subtract the result from 8  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>Putting it into a rough formula we get:  </p></div><div class="snippet textual-snippet code-snippet pharo-snippet nesting-level-3 fullWidth">  <pre class="no_bottom_margin">sets := 2. "for example"partialSets := 2. "the rest"pairs := 1.result := 8 - (2 * sets) - (1 * partialSets) - (1 * pairs).ready := result = 0.winning := result = -1.  </pre></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>Further it is claimed that a ready hand has the result being 0 and a winning hand has a result of -1.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>This formula makes sense, namely because our goal is to have 4 groups, which would give us a value of 8 and 1 pair which would give us a value of 1. Meaning a complete hand is -1.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>To finish incomplete groups we will be cutting the other incomplete sets to finish. Due to hand size constraints this will necessairly end us with 4 different groupings.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>Let us apply this algorithm to a full hand to confirm our thoughts.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/3a776zh5325c0b870lrqto8nj.png"/></figure><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>We can see 3 completed sets, and 2 pairs, meaning we get:  </p></div><div class="snippet textual-snippet code-snippet pharo-snippet nesting-level-3 fullWidth">  <pre class="no_bottom_margin">sets := 3. "for example"partialSets := 1. "the rest"pairs := 1.result := 8 - (2 * sets) - (1 * partialSets) - (1 * pairs).  </pre></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>we get a value of 0, meaning we are in tenpai. Which is accurate!  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>With the base formula understood, let us modify it to work for our use case, which is a bit different from the common usecase.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>Namely, we often want to analyze subsets of hands, a hand waiting to draw a tile, and sometimes assume having or not having a pair.   </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>For example,  we may want to analyze a hand like <code>23467m</code>. In such a case, we will likely want to assume the pair is done, and give back the same answer the <code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">MJHand>>#acceptsComplete</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><pre><code class="">acceptsComplete	^ self chunkedGroupBackTrackerwith: #acceptsComplete</code></pre>    </span> gives back. However if we have an example like <code>1112367m</code> we likely care about the formula including pairs.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>Further, in the examples above, we can see we give much less than 14 tiles, and thus want to assume all the other sets are finished for the sake of analysis.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>It gets more complicated in that, we may wish to analyze a hand that has not drawn yet, meaning that the algorithm needs to potentially have a mode that is "waiting on drawing".  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>To properly account for these details, I propose splitting the algorithm into two variants  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>Variant 1: Pair.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-4 paragraphWidth">  <p>1. Calculate the number of groups to be the <b>floor</b> of diving the number of tiles by 3.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-4 paragraphWidth">  <p>2. Change the result from subtracting 8 to subtracting twice the number of sets we wish to complete.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-4 paragraphWidth">  <p>3a. If the number of tiles is ≡ 1 mod 3, then the hand is waiting to draw.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-4 paragraphWidth">  <p>3b. If the number of tiles is ≡ 2 mod 3, then then the hand is waiting to discard  </p></div><div class="snippet textual-snippet text-snippet nesting-level-4 paragraphWidth">  <p>3c. If the number of tiles is ≡ 0 mod 3, then there must be 1 kan or the formula is invalid.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>Variant 2: No Pair.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-4 paragraphWidth">  <p>1. Calculate the number of groups to be the <b>ceiling</b> of diving the number of tiles by3.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-4 paragraphWidth">  <p>2. Change the result from subtracting 8 to subtracting twice the number of sets we wish to complete.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-4 paragraphWidth">  <p>3 a. If the number of tiles is ≡ 1 mod 3, then there must be 1 kan or the formula is invalid.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-4 paragraphWidth">  <p>3b. If the number of tiles is ≡ 2 mod 3, then the hand is waiting to draw.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-4 paragraphWidth">  <p>3c. If the number of tiles is ≡ 0 mod 3, then the hand is waiting to discard.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>Put into a formula, we get  </p></div><div class="snippet textual-snippet code-snippet pharo-snippet nesting-level-3 fullWidth">  <pre class="no_bottom_margin">groupings_v1 := (tiles / 3) floor.	"variant 1"groupings_v2 := (tiles / 3) ceiling.	"variant 2"shantenNumber := groupings * 2.result := shantenNumber - (2 * sets) - (1 * partialSets) - (1 * pairs)  </pre></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>A comment about the changes. <code>1.</code> is mostly fine, however it does not account for groupings of 4. I believe not knowing the group number apriori, makes calculating 4 groups not possible.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>For the time being we shall create 4 groups, as we should be able to get accurate groupings hopefully.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>Change <code>2.</code> falls from the intent of the formula.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>Changes <code>3a.</code> to <code>3c.</code> are simply there to determine if the given hand is waiting or drawing based on the situation.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>To account for the variance of 2 and 3, we will introduce many methods on Strings that create the kinds of hands we want trivially, so.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>With the rough plan sketched out, let us see how it does on some examples:  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/3a776zes7fd1g4a3qcwggswje.png"/></figure><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>With variant one, we have 5 tiles, meaning we have <code>2 mod 3</code>. This means we should be discarding a tile. Further, we should have 1 grouping [<code>(5 / 3) floor</code>], and one pair. Since we have neither we get 2 - 1, which is accurate.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>With variant two, we are waiting to draw. There is a total of two groupings  [<code>(5 / 3) ceiling</code>], thus we have 4 - 2. Which is also accurate!  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/3a776zhn51kpad1kkrgpg4q4y.png"/></figure><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>This hand is very similar, we simply added a tile, meaning it's now <code>0 mod 3</code>.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>For variant 1 this is invalid, as the only way to proceed is by dropping <code>8p</code>, but then we are at a state where we should be discarding again.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>For variant 2 we should be discarding, The formula numbers are the same as long, but we have a pair meaning we are 1 away from tenpai, which matches reality.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/3a776zfhknkexplsyq2oq2kua.png"/></figure><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>The last variant, where we have <code>1 mod 3</code>.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>Variant one recognizes this hand as waiting to draw, and if we run our formula we have 2 groupings, and so we end up at <code>0</code> which is accurate, our hand is ready!  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p>Variant two does not recognize this hand as valid, as it has 1 too many tiles to work from. Discarding the <code>8p</code> would give us a winning hand, but it's odd to analyze such a situation.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>The algorithms seem accurate, let us now tackle the problem in code.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-1 paragraphWidth">  <h3> Programming a solution  </h3></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>Unlike <a href="mahjong-hand-acceptance-92qynfei1oie76eyij1ngzavh.html">Mahjong Hand Acceptance</a>, the amount of code should be minimal, as most of the infrastructure is already done. However some infrastructure work still needs to be done.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>Namely, I want to break up <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">MJHand</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">MJTiles subclass: #MJHand	instanceVariableNames: ''	classVariableNames: ''	package: 'MiscGTScripts-Tiles'</code>    </span> and <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">MJGroups</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">MJTiles subclass: #MJGroups	instanceVariableNames: ''	classVariableNames: ''	package: 'MiscGTScripts-Tiles'</code>    </span> into subclasses that know about if they should be calculating in variant 1 or variant 2. Taking an OO stance on this should make the code simpler to understand.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p><code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">MJHandKnown</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">MJHand subclass: #MJHandKnown	instanceVariableNames: 'groupings'	classVariableNames: ''	package: 'MiscGTScripts-Tiles'</code>    </span>, <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">MJHandP</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">MJHand subclass: #MJHandP	instanceVariableNames: ''	classVariableNames: ''	package: 'MiscGTScripts-Tiles'</code>    </span>, and <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">MJHandNP</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">MJHand subclass: #MJHandNP	instanceVariableNames: ''	classVariableNames: ''	package: 'MiscGTScripts-Tiles'</code>    </span> were created for <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">MJHand</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">MJTiles subclass: #MJHand	instanceVariableNames: ''	classVariableNames: ''	package: 'MiscGTScripts-Tiles'</code>    </span>.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>With each of the variants created, we can now write a custom logic to determine the number of groups  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p><code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">MJHandP>>#groups</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><pre><code class="">groups	^ (tiles size / 3) floor</code></pre>    </span>, <code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">MJHandNP>>#groups</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><pre><code class="">groups	^ (tiles size / 3) ceiling</code></pre>    </span>.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>As we saw in <a href="mahjong-hand-acceptance-92qynfei1oie76eyij1ngzavh.html">Mahjong Hand Acceptance</a>, we now need to write a back tracking algorithm.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>Since we did this task before, it's rather simple, and has culminated in these methods  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p><code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">MJHand>>#shantenGroups:index:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><pre><code class="">shantenGroups: aGroup index: currentTile	"Does backtracking for seeing what tiles the hand accepts.	The index is simply where in the array we are cdring down"	| tile accepting recurse min |	currentTile > tiles size		ifTrue: [ ^ {aGroup.				aGroup shanten: self groups assumePair: self pair not} ].	tile := tiles at: currentTile.	recurse := [ :groups | self shantenGroups: groups index: currentTile + 1 ].	accepting := aGroup			onAccepting: tile			doIndependently: [ :groups :group | 				group add: tile.				recurse value: groups ].	aGroup addIndependently: tile.	accepting add: (recurse value: aGroup).	min := (accepting collect: [ :each | each at: 2 ]) min.	accepting := accepting			select: [ :ele | (ele at: 2) = min ]			thenCollect: [ :each | each at: 1 ].	^ {accepting flattened.		min}</code></pre>    </span> this is the main method. We basically export out all groups with the least shanten.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-3 paragraphWidth">  <p><code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">MJHand>>#shantenBackTrack:index:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><pre><code class="">shantenBackTrack: aGroup index: currentTile	"Does backtracking for seeing what tiles the hand accepts.	The index is simply where in the array we are cdring down"	| anArr |	anArr := self shantenGroups: aGroup index: currentTile.	^ {(anArr at: 1) flatCollect: [ :group | group acceptsShanten tiles].		anArr at: 2}</code></pre>    </span> simply turns the groups into the tiles for a view on what tiles are needed.  </p></div><div class="snippet textual-snippet text-snippet nesting-level-2 paragraphWidth">  <p>This completes the task, but let us make a few views to really get the benefit of this work.  </p></div>

                        <!-- page content end -->
                    </main>
                </div>
            </div>

        </div>
    </div>

    <footer class="text-center py-5 le-footer">
        <p class="le-footer-credits">
            Powered by <a class="le-footer-link" href="https://lepiter.com">Lepiter</a> | <a class="le-footer-link" href="https://feenk.com/privacy">Privacy Policy</a>
        </p>
    </footer>

    <!-- scripts -->
    <script type="text/javascript" src="assets/vendor/jquery/js/jquery.js"></script>
    <script type="text/javascript" src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/datefns.min.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/highlight.pack.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/lepiter-common.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/lepiter-snippets.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/lepiter-time.js"></script>
</body>
</html>
