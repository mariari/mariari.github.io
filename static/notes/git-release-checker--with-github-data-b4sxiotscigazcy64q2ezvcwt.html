<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Git Release Checker: With Github Data</title>

    <!-- browser setup -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">

    <!-- page meta information -->
    <meta name="description" content="Git Release Checker: With Github Data">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="gtoolkit book">
    <meta property="og:title" content="Git Release Checker: With Github Data">
    <meta property="og:url" content="https://book.gtoolkit.com/git-release-checker--with-github-data-b4sxiotscigazcy64q2ezvcwt.html">
    <meta property="og:description" content="Git Release Checker: With Github Data">

    <!-- CSS styles -->
    <link rel="stylesheet" href="assets/vendor/awesomefonts/css/all.css">
    <link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/v2/src/css/lepiter-common.css">
    <link rel="stylesheet" href="assets/v2/src/css/lepiter-snippets.css">
    <link rel="stylesheet" href="assets/v2/src/css/vs.css">
</head>
<body>

    <div class="content">
        <div class="row le-row">

            <!-- side menu with header -->

            <div class="col-lg-3 le-nav-column">
                <div class="side-menu sticky-top navbar-expand-lg le-nav-scrollable le-nav-container">
                    <header class="navbar navbar-light bg-white sticky-top px-3 le-nav-footer">
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#le-nav-collapsable" arial-controls="le-nav-collapsable" arial-expanded="false" arial-label="Toggle navigation">
                            <i class="fas fa-bars">
                            </i>
                        </button>
                        <p class="le-logo">
                            <a class="le-logo-link" href="https://gtoolkit.com" alt="Glamorous Toolkit"><span class="le-logo-g">glamorous</span><span class="le-logo-t">toolkit</span></a> <span class="le-logo-version">v1.0.942</span>
                        </p>
                    </header>

                    <nav id="le-nav-collapsable" class="navbar-collapse collapse le-nav-root">

                        <!-- navigation start -->

                        <ul class="nav flex-column le-nav le-nav-level-0">  <li class="nav-item  le-nav-item le-nav-level-1">    <a class="nav-link le-nav-link le-nav-level-1" href="table-of-contents-2qzwdq1sjk7rkkm19wn9xo3xm.html">Table of Contents    </a>  </li>  <li class="nav-item  le-nav-item le-nav-level-1">    <a class="nav-link le-nav-link le-nav-level-1" href="git-exploration-3a776zg73cujtc6djgdy6wpzp.html">Git Exploration    </a>    <ul class="nav flex-column le-nav le-nav-level-1">      <li class="nav-item  active le-nav-item le-nav-level-2">        <a class="nav-link le-nav-link le-nav-level-2 active" href="git-release-checker--with-github-data-b4sxiotscigazcy64q2ezvcwt.html">Git Release Checker: With Github Data        </a>      </li>    </ul>  </li>  <li class="nav-item  le-nav-item le-nav-level-1">    <a class="nav-link le-nav-link le-nav-level-1" href="mahjong-ajc74mr0i1pgt8td5660dkhg5.html">Mahjong    </a>    <ul class="nav flex-column le-nav le-nav-level-1">      <li class="nav-item  le-nav-item le-nav-level-2">        <a class="nav-link le-nav-link le-nav-level-2" href="mahjong-tactics-1l41j2ln59fumi6gfkewcjimu.html">Mahjong Tactics        </a>      </li>      <li class="nav-item  le-nav-item le-nav-level-2">        <a class="nav-link le-nav-link le-nav-level-2" href="mahjong-algorithms-and-exploration-3ifqqrjnuly2xjmfreghzqayr.html">Mahjong Algorithms and Exploration        </a>        <ul class="nav flex-column le-nav le-nav-level-2">          <li class="nav-item  le-nav-item le-nav-level-3">            <a class="nav-link le-nav-link le-nav-level-3" href="mahjong-hand-acceptance-92qynfei1oie76eyij1ngzavh.html">Mahjong Hand Acceptance            </a>          </li>          <li class="nav-item  le-nav-item le-nav-level-3">            <a class="nav-link le-nav-link le-nav-level-3" href="mahjong-shanten-calculations-9997z4yze8dhfwt3bokgfyx8y.html">Mahjong Shanten Calculations            </a>          </li>        </ul>      </li>    </ul>  </li>  <li class="nav-item  le-nav-item le-nav-level-1">    <a class="nav-link le-nav-link le-nav-level-1" href="glossary-of-terms-a5d5onslmzrgaika37ydfp1w0.html">Glossary of Terms    </a>    <ul class="nav flex-column le-nav le-nav-level-1">      <li class="nav-item  le-nav-item le-nav-level-2">        <a class="nav-link le-nav-link le-nav-level-2" href="shanten-a5d5onsg5911189zz8w7n5k2b.html">Shanten        </a>      </li>      <li class="nav-item  le-nav-item le-nav-level-2">        <a class="nav-link le-nav-link le-nav-level-2" href="tenpai-4ihldzd680p6mvkkjxg7xqy4m.html">Tenpai        </a>      </li>    </ul>  </li></ul>

                        <!-- navigation end -->
                    </nav>
                </div>
            </div>

            <!-- main content -->

            <div class="col-lg-9 le-main-col">
                <div class="container min-height py-5 le-main-container">
                    <main>
                        <h1 class="le-main-title">Git Release Checker: With Github Data</h1>

                        <!-- page content start -->

                        <div class="snippet textual-snippet text-snippet paragraphWidth">  <h4>Git Maintainership: On git workflows  </h4></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>There are many ways to run and maintain a <a href="https://git-scm.com/">git</a> project. The projects under my maintance tend to be ran in a similar style that both <a href="https://git-scm.com/">git</a> and <a href="https://www.kernel.org/">linux</a> maintains projects. The typical git style with those projects is that contributors send patches from the latest release to a maintainer via <a href="https://git-scm.com/docs/git-am">git am</a>. From there a maintainer takes the patches submited and forms patch sets to either prepare for a release or to send (via a PR) to another maintainer.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Where my style differs from both <a href="https://git-scm.com/">git</a> and <a href="https://www.kernel.org/">linux</a> is that my projects tend to be hosted on github and they utilize <a href="https://docs.github.com/en/issues/planning-and-tracking-with-projects/learning-about-projects/about-projects">Github's project boards</a>. This makes the style of git differ from the above project in the following way:  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>1. Instead of getting patches via <a href="https://git-scm.com/docs/git-am">git am</a>, users submit a <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/about-pull-requests">pull request (pr) on github</a>.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>2. Further, instead of having a <a href="https://lore.kernel.org/git/?q=s:%22What's%20cooking%20in%20git.git%22">whats cooking</a> mailing thread to show the progression of topics, I utilize a project board with a <a href="https://en.wikipedia.org/wiki/Kanban">kanban</a> view to show the progression of topics.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>3. Instead of having users create pull requests off of the latest release, I create a branch/topic called <code>base</code> for users to base their changes against.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>The git workflow I described tends to revolve around a stable base that gets updated as a new release comes out. However, this is in stark contrast with how <code>github</code> encourages projects to be run. There are many user experience barriers to running a project with a stable base:  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>1. Github has a notion of a <a href="https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/managing-branches-in-your-repository/changing-the-default-branch">default branch</a>, in which most every action happens to.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Pull requests by default target this default branch.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>the repository default clone goes to the default branch by default. This means everyone uses this branch to contribute to the project.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>2. Due to prs being against the default branch by default, and the state of a pr is either <code>merged</code>, <code>open</code>, or <code>closed</code>, this encourages maintainers to merge the users topic as soon as possible, to lower the number of open requests  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>If a maintainer does not do this, then a user may wonder if their work got accepted or if it is stuck in limbo.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>3. The UI on the main page only shows the defualt branch, views into other topics are not easily shown on the website  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>This has results in low visibility to the user on how the project is changing if they are not merging to the default branch  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>4. The git history is only shown as a linear series of commits without <code>--first-parent</code> or displaying the graph  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p><code>--first-parent</code> allows viewing a branch as if the commits have been squashed, without this linear history can look quite messy. This is why one of the <a href="https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/configuring-pull-request-merges/about-merge-methods-on-github">merging methods</a> github natively supports is <code>merge and squash</code>, as the history viewable on the website is not very clean without it.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>The assumption of a rapidly changing default branch also affects how project board workflows work. For example the workflow actions for issues and prs can only trigger automated actions when their states changes. Since the states are limited to <code>merged</code>, <code>open</code>, and <code>closed</code>, there are no automated way to see if a topic is included in a release candidate or not. For a typical project that merges things regularly to base, the user experience of this is not too painful as anything left that is not closed is minimal and can be manually handled.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Due to the relatively high friction in github's tooling for managing git projects in this way I wish to create a tool that can help me check releases.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Thankfully for me, github offers a <a href="https://graphql.org/">graphql</a> api that lets users write queries against both project boards and incoming pull requests. So the energy spent on maintaing a clean project board is not all wasted.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h4>The kind of project management tool that I want  </h4></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>With the difficencies of github's interface known, let me outline what would improve my maintainership experience:  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>1. I'd like to be able to see the topic names of open pr's in the board view (oddly enough you can't do this with github natively!).  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>This would allow me to quickly relate pr's to topics in a quick way.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>2. I'd like to see if a topic is merged against some <code>release candidate</code> I have in mind. That way I can see without having to go through every topic name if I forgot anything.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>3. Ideally I'd be able to have a tool that can track dependencies between the open pr's and show me a graph view.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>4. I'd like to cut topics by their tags.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>5. Finally I'd like a tool to suggest to me a hypothetical ordering I can try to base work on.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>I don't trust this to fully automate the decision on what to merge, but rather to give me ideas on what orders I can think about first.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>To keep this post brief, I will implement <code>1.</code> and <code>2.</code> and leave <code>3.</code> through <code>5.</code> for a follow up post.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h4>Designing the tool  </h4></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>With our objectives known, let us start the process by choosing a project and creating simple views that correspond to the solutions that I'd like to see.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>For the sake of this document I will chose the <a href="https://github.com/anoma/anoma">anoma</a> repo and project board as that is where most of my engineering effort has been going. Since the project board (and the repo of the time of this writing) is not public, you will not be able to run the code exactly like I have, however the code is fully general and you can change the specific paramemters to what you like.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>With that said, let me load the <a href="https://github.com/anoma/anoma">anoma</a> codebase into <code>GT</code>.  </p></div><div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">  <pre class="no_bottom_margin">anoma := FileLocator home / 'Documents' / 'Work' / 'Repo' / 'anoma'.anomaRepo := IceLibgitRepository new location: anoma  </pre></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Playing with smalltalk a bit we can see how to determine if a topic is merged in another branch or not.  </p></div><div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">  <pre class="no_bottom_margin">base := IceGitLocalBranch named: 'base' inRepository: anomaRepo.exampleNock := IceGitRemoteBranch		named: 'anoma/mariari/example-nock'		inRepository: anomaRepo.exampleClosed := IceGitRemoteBranch		named: 'anoma/mariari/node-from-base'		inRepository: anomaRepo.base commit isParentOf: exampleNock commit  </pre></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>With the general premise explored, let us start create example code that corresponds to precisely what we want!  </p></div><div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">  <pre class="no_bottom_margin">exampleNockInclude := GitTopicInfo new		topic: exampleNock;		tags: {};		status: 'WIP';		yourself.exampleClosedInclude := GitTopicInfo new		topic: exampleClosed;		tags: {};		status: 'Closed';		yourself  </pre></div><div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">  <pre class="no_bottom_margin">release := GitProjectBoardByHand new candidateBranch: base.release	items: {exampleNockInclude.			exampleClosedInclude}  </pre></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>In these snipits we prepose we have classes named <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitTopicInfo</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">ProjectBoardItem subclass: #GitTopicInfo	instanceVariableNames: 'topic description'	classVariableNames: ''	package: 'MiscGTScripts-git'</code>    </span> and <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitProjectBoardByHand</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">GitProjectBoard subclass: #GitProjectBoardByHand	instanceVariableNames: 'items'	classVariableNames: ''	package: 'MiscGTScripts-git'</code>    </span>.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Further since <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitProjectBoardByHand</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">GitProjectBoard subclass: #GitProjectBoardByHand	instanceVariableNames: 'items'	classVariableNames: ''	package: 'MiscGTScripts-git'</code>    </span> can also contain issues, I've made <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">ProjectBoardItem</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">Object subclass: #ProjectBoardItem	instanceVariableNames: 'tags status allTags itemNumber'	classVariableNames: ''	package: 'MiscGTScripts-git'</code>    </span> as a parent class and added <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitIssueInfo</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">ProjectBoardItem subclass: #GitIssueInfo	instanceVariableNames: ''	classVariableNames: ''	package: 'MiscGTScripts-git'</code>    </span> as a sister class. Later in the article we will define a parent class to <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitProjectBoardByHand</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">GitProjectBoard subclass: #GitProjectBoardByHand	instanceVariableNames: 'items'	classVariableNames: ''	package: 'MiscGTScripts-git'</code>    </span> called <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitProjectBoard</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">Object subclass: #GitProjectBoard	instanceVariableNames: 'repo statuses candidate remoteName'	classVariableNames: ''	package: 'MiscGTScripts-git'</code>    </span>. Since this document contains the live methods in the system, we will sometimes give the parent's methods rather than the methods defined above.   </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>The idea of <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitTopicInfo</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">ProjectBoardItem subclass: #GitTopicInfo	instanceVariableNames: 'topic description'	classVariableNames: ''	package: 'MiscGTScripts-git'</code>    </span>is to contain all the information we'd need inorder to effectively create our tool. For this we simply keep information about the:  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p> <code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitTopicInfo>>#topic:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">topic: atopic	topic := atopic</code>    </span>  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p> <code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">ProjectBoardItem>>#status:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">status: anObject	status := anObject</code>    </span>  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>and any  <code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">ProjectBoardItem>>#tags:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">tags: anObject	tags := anObject</code>    </span>  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Further <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitProjectBoardByHand</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">GitProjectBoard subclass: #GitProjectBoardByHand	instanceVariableNames: 'items'	classVariableNames: ''	package: 'MiscGTScripts-git'</code>    </span>, needs to only keep information about:  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p><code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitProjectBoard>>#candidateBranch:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">candidateBranch: aBranch	&lt;argument: #aBranch isKindOf: #IceGitLocalBranch>	candidate := aBranch</code>    </span>  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p><code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitProjectBoardByHand>>#items:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">items: topicsList	items := topicsList</code>    </span>  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Now that we have the data we wish to visualize let us quickly write some visualization code. Thankfully GT makes this part easy:  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>The <code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitProjectBoard>>#isInReleaseColor:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">isInReleaseColor: aValue	&lt;argument: #aValue isKindOf: #GitTopicInfo>	^ self hasReleaseCandidate		ifTrue: [ (self candidate commit isParentOf: aValue topic commit)				ifTrue: [ Color fromHexString: '087D91' ]				ifFalse: [ Color fromHexString: '911c08' ] ]		ifFalse: [ Color black ]</code>    </span> method, lets us pick a color depending on the status if a particular topic is merged with the <code>candidate</code> branch.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>While <code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitProjectBoard>>#gtRepositoryProjectBoard:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">gtRepositoryProjectBoard: aView	&lt;gtView>	| topicName color columned |	columned := aView columnedList.	columned		title: 'Whats Cooking';		items: [ [ self items ] value asyncSimilarCopy select: [ :anItem | anItem isTopic ] ];		priority: 10;		column: 'Index'			text: [ :aValue :anIndex | anIndex asRopedText foreground: BrGlamorousColors disabledButtonTextColor ]			width: 40;		column: 'Topic Name'			text: [ :aValue | 				color := self isInReleaseColor: aValue.				topicName := aValue topicName asRopedText.				topicName foreground: color ]			width: 300;		column: 'State'			do: [ :aColumn | 				aColumn					stencil: [ :eachTopic | self dropDownStatusFrom: eachTopic ];					width: 130 ];		column: 'Tags'			text: [ :aValue | aValue tags asString asRopedText foreground: BrGlamorousColors darkBorderColor ]			width: 500.	^ columned actionUpdateButton</code>    </span> does the visuals. This is done via a <code>columnedList</code> view that breaks each items into their own columns.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>The <code>items: [ [ self ... ] ... ];</code> tells the columned list that the items we are going to reprsents are the outcome of this computation. The  computation may seem a bit complicated, however <code>self items</code> in this case is just the array literal we set with <code>items:</code>. We put it in a closure <code>[ ]</code> because we wish for the data to be recomputed fresh each time. Lastly the <code>select:</code> is a filter because the visualization we wish to do is only concerned with <code>topics</code>.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Each <code>column:text:width</code> section just sets a new column in the list with some text and a set width.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>For example the <code>'Topic Name'</code> section utilizes our <code>isInReleaseColor:</code> method above to set the color of the text.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>The only other intersting case is the <code>'State'</code> section, as this creates a drop down button. When writing this article the code is not done yet, but it will be a place for future exploration in allowing our project to change the data in github.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Lastly <code>actionUpdateButton</code> let's us requery the data if the computation was grabbing data from somewhere.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>A lot more can be done here, but let us see if we get the desired results.  </p></div><div>  <figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/bmd36v1xfwmdjpho764sbef1f.png"/>  </figure></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>As we can see, the results are what we expected, and look quite clean as we can clearly see that <code>anoma/mariari/node-from-base</code> is not merged, while <code>anoma/mariari/example-nock</code> is merged.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Further the <code>State</code> shows if I ought to merge something, I can safely skip anything labeled <code>WIP</code>, while cutting a release. This satisfies my requirements for <code>1.</code> and <code>2.</code>.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>If this tool works, this means that I need not go down the entire project board to see if I missed merging anything.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h4>Getting data from Github  </h4></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Now that we have our data model setup, all that is left to do is to query data from github to populate this view.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Before we can use github's graphql API, we have to get a github key.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>For the sake of this article I shall put a key in a local directory.  </p></div><div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">  <pre class="no_bottom_margin">githubAccessKeyFile := FileLocator home / '.emacs.d' / 'gh-key.txt'.githubAccessKey := githubAccessKeyFile contents trimBoth  </pre></div><div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">  <pre class="no_bottom_margin">aContext := GtGQLContext new		url: 'https://api.github.com/graphql';		bearerToken: githubAccessKey;		buildSchema.  </pre></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Now that we have a context up let us write a query that will get the data we desire.  </p></div><div class="snippet textual-snippet code-snippet graphql-snippet fullWidth">  <pre class="no_bottom_margin">query WhatsCooking($board: Int!, $organization: String!){	organization(login: $organization) {		login name url		projectV2 (number: $board) {			__typename			title			number			id			items(first: 99) {				totalCount				edges {					cursor					node {  					id					content {						... on PullRequest { headRefName } }					labels: fieldValueByName (name: "Labels") {						... on ProjectV2ItemFieldLabelValue {							labels(first: 10) {								edges { node { color name } } } } }					status: fieldValueByName (name: "Status") {						... on ProjectV2ItemFieldSingleSelectValue {							name } } } } } } } }   </pre></div><div class="snippet textual-snippet code-snippet graphqlinput-snippet fullWidth">  <pre class="no_bottom_margin">{ "organization": "anoma", "board": 20}  </pre></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>This graphql query will grab <code>99</code> items from the project board, that has informaiton about:  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>1. all labels that may be on the topic  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>2. the ref name on the remote  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We will further pagenate more results, but first let us prepose a class that contains all the information required to run our task  </p></div><div class="snippet textual-snippet code-snippet pharo-snippet fullWidth">  <pre class="no_bottom_margin">project := GithubGQLProjectBoard new		context: aContext;		gitLocation: FileLocator home / 'Documents' / 'Work' / 'Repo' / 'anoma';		organisation: 'anoma';		board: 20;		remoteName: 'anoma';		yourself.project candidate: 'v0.17.0-rc1'  </pre></div><div class="snippet textual-snippet text-snippet paragraphWidth"></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>In the above code snippit, we propose a class called <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GithubGQLProjectBoard</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">GitProjectBoard subclass: #GithubGQLProjectBoard	instanceVariableNames: 'gqlContext board organisation'	classVariableNames: ''	package: 'MiscGTScripts-git'</code>    </span> that is the sister to our previous <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitProjectBoardByHand</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">GitProjectBoard subclass: #GitProjectBoardByHand	instanceVariableNames: 'items'	classVariableNames: ''	package: 'MiscGTScripts-git'</code>    </span>. The class is very similar to it's sister, but instead of giving the <code>items</code> by hand, we instead have the items be computed from the <code>whatsCooking</code> query above.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Further, we have to fill in repository details with <code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitProjectBoard>>#gitLocation:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">gitLocation: aPath	&lt;argument: #aPath isKindOf: #FileLocator>	repo := IceLibgitRepository new location: aPath</code>    </span>and <code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitProjectBoard>>#candidate</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">candidate	^ candidate</code>    </span> because creating proper <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GitTopicInfo</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">ProjectBoardItem subclass: #GitTopicInfo	instanceVariableNames: 'topic description'	classVariableNames: ''	package: 'MiscGTScripts-git'</code>    </span>'s like we did above requires those details.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>In order to get our <code>WhatsCooking</code> board into a reasonable format, we need to write  <code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GithubGQLProjectBoard>>#projectValueStream</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">projectValueStream	| aResult |	aResult := self projectBoardResult.	^ aResult paginator		connectorPath: #(organization projectV2 items);		collect: [ :item | 			GithubProjectV2Item new				fromJson: (item asJson at: #node);				toProjectBoardItemWith: self repo andUpstream: self remoteName ]</code>    </span>  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>The astute of you can see that we defined another class <code class="annotation annotation-label annotation-label-class annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GithubProjectV2Item</code>    <span class="textual-snippet code-snippet pharo-class-definition expandable-annotation-view collapsed-annotation-view"><code class="">GithubGQL subclass: #GithubProjectV2Item	uses: GithubJSON	instanceVariableNames: 'itemID status currentLabels contents'	classVariableNames: ''	package: 'MiscGTScripts-git'</code>    </span>. In reality we defined a few of these classes that are simple wrappers over the raw querying data we designed above.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Further the <code>connectorPath:</code> let's the code query more item entries from github meaning that we can grab all the items if there happens to be more than <code>99</code> topics.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Let us now post the intersting code that does the parsing  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p><code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GithubProjectV2Item>>#fromJson:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">fromJson: ajson	^ self		statusFromJSON: ajson;		labelsFromJson: ajson;		contentFromJson: ajson;		yourself</code>    </span> takes the json stream and creates the object  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p><code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GithubProjectV2Item>>#statusFromJSON:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">statusFromJSON: projectBoardItem	self status: (projectBoardItem atPath: #(status name)) jsonObject</code>    </span> grabs the status  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p><code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GithubProjectV2Item>>#labelsFromJson:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">labelsFromJson: projectBoardItem	self		currentLabels: ((projectBoardItem atPath: #(labels labels edges))				collect: [ :x | x node name jsonObject ])</code>    </span> grabs the labels  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p><code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GithubProjectV2Item>>#contentFromJson:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">contentFromJson: projectBoardItem	" update later to handle issues and WIP Issues, need to match off the __typename"	self contents: (GithubPR new fromJson: (projectBoardItem at: #content))</code>    </span> grabs the topic.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p><code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GithubProjectV2Item>>#toProjectBoardItemWith:andUpstream:</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">toProjectBoardItemWith: repo andUpstream: upstream	| content topic |	" TODO, try to get issue info as well"	content := self contents.	topic := IceGitRemoteBranch			named: upstream , '/' , content refName			inRepository: repo.	^ GitTopicInfo new		tags: self currentLabels;		status: self status;		allTags: content repoLabels;		itemNumber: content prNumber;		topic: topic;		yourself</code>    </span> is the last intersting bit as this converts the wrapper objects into our format. Thankfully the code is quite simple.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Now to make the visaulization work, we just need to point <code>items</code> to this method, we do this by setting <code class="annotation annotation-label annotation-label-method annotation-label-code expandable-annotation-label annotation-sibling-is-collapsed">GithubGQLProjectBoard>>#computeItems</code>    <span class="textual-snippet code-snippet pharo-method-snippet expandable-annotation-view collapsed-annotation-view"><code class="">computeItems	^ self projectValueStream</code>    </span>. Now our visaulization should just work!  </p></div><div>  <figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/bmd36v1vqov995esy28172krm.png"/>  </figure></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h4>Closing Thoughts  </h4></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Overall creating the tool was satisfying, it solves a big user experience issue I have with github. Namely I don't have to click on every single item in the project board to see if I merged it against some release candidate.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>This code can be found on my <a href="https://github.com/mariari/Misc-GT-Scripts">https://github.com/mariari/Misc-GT-Scripts</a> repository.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>This code is just the first stepping stone. Stay tuned for future posts where I improve this tool to better help me in my maintainership role.  </p></div>

                        <!-- page content end -->
                    </main>
                </div>
            </div>

        </div>
    </div>

    <footer class="text-center py-5 le-footer">
        <p class="le-footer-credits">
            Powered by <a class="le-footer-link" href="https://lepiter.com">Lepiter</a> | <a class="le-footer-link" href="https://feenk.com/privacy">Privacy Policy</a>
        </p>
    </footer>

    <!-- scripts -->
    <script type="text/javascript" src="assets/vendor/jquery/js/jquery.js"></script>
    <script type="text/javascript" src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/datefns.min.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/highlight.pack.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/lepiter-common.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/lepiter-snippets.js"></script>
    <script type="text/javascript" src="assets/v2/src/js/lepiter-time.js"></script>
</body>
</html>
